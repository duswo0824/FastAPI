<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<link rel="stylesheet" href="./common.css">
</head>
<body>
	<table>
			<tr>
				<th>제목</th>
				<td id="subject"></td>
			</tr>
			<tr>
				<th>작성자</th>
				<td id="user_name"></td>
			</tr>
			<tr>
				<th>작성일</th>
				<td id="reg_date"></td>
			</tr>
			<tr>
				<th>조회수</th>
				<td id="bhit"></td>
			</tr>
			<tr>
				<th>내용</th>
				<td id="content"></td>
			</tr>
			<tr>
				<th colspan="2">
					<input type="button" value="리스트" onclick="location.href='list.html'"/>
				</th>
			</tr>
		</table>
</body>
<script>
	const loginId = sessionStorage.getItem('loginId');
	detail(location.search)

	function detail(param){
		console.log(param)
		$.ajax({
			url:"http://127.0.0.1:5000/board/detail"+param,
			type:"GET",
			dataType:"json",
			headers:{
				"authorization": sessionStorage.getItem('token'),
				"loginId": loginId
			},
			success:function(info){
				console.log(info);
				$('#subject').html(info.subject);
				$('#content').html(info.content);
				$('#user_name').html(info.user_name);
				$('#reg_date').html(info.reg_date);
				$('#bhit').html(info.bhit);
			},error:function(err){
				console.log(err);
				console.error("HTTP 상태:", err.status);
				if (err.responseJSON) {
					alert(err.responseJSON.msg);
					location.href="index.html";
				} else {
					alert("서버로부터 응답을 받지 못했습니다.");
				}
			}
		});

	}
</script>
</html>